## Отчет о переводе проекта на TypeScript

### Перевод фронтенда:
1. Воспользовался [гайдом](https://create-react-app.dev/docs/adding-typescript) по переводу `create-react-app` на `ts`
2. Переименовал с помощью комманды `find client-react/src -name "*.js" -exec sh -c 'mv "$0" "${0%.js}.ts"' {} \;` все `js`-файлы в `ts`-файлы
3. Переименовал файлы из `ts` в `tsx`, с помощью `IDE`.
4. Остальную миграцию можно разделить на следующие шаги:
    1. Перенос модуля апи (запросы на сервер) и моделей.
    Здесь все было просто я писал `JSDoc`, поэтому типы из `JSDoc`ов довольно быстро перенеслись на `TS`.
    2. Перенос всего, что связано с редаксом.
    Тут была сложность с тем, что конфликтовали типы `action` и я решил эту проблему
    разделением на более мелкие редьюсеры.
    3. Перенос компонентов реакта. Не сказал бы, что сложно, но долго. Пришлось
    перебрать все компоненты и прописать типы для `props` и для роутера и для
    пропса `children` пришлось поискать правильный `generic`.

### Перевод сервера:
1. Переименовал с помощью комманды `find server -name "*.js" -exec sh -c 'mv "$0" "${0%.js}.ts"' {} \;` все `js`-файлы в `ts`-файлы
2. Остальную миграцию можно разделить на следующие шаги:
    1. Перенос моделей. Опять же я писал `JSDoc`, тут все просто.
    2. Перенос модулей, вот числе тех, которые отвечают за
    вызов интерфейса `git`. Тут была проблема с модулем [Actions#run](../server/modules/actions.ts),
    не получилось объяснить в типах зависимость между `enum` и вызываемым
    `action` и я переписал модуль так, чтобы проще было типизировать.
    3. Перенос роутов `express`, из-за того, что я обрабатываю данные
    в миддлварах пришлось переопределить `namespace` `express` в [папке externs](../externs/express/index.d.ts),
    но у меня не получилось сделать это доконца и использовал `@ts-ignore`. Проблема в том, что я
    не смог понять как реализовать подмену типа, когда делаю `const router = express.Router();`.
    Этот метод всегда возвращает тип `Router` из настоящей библиотеки, но мне нужно, чтобы там был
    мой переопределенный `Express.Router`. Долго мучался в итоге заюзал `@ts-ignore`.
    

### Вердикт:
Пулл реквест с миграцией я волью в основную ветку, потому что типизированный код:
    1. надежнее
    2. читаемее
    3. строже

В целом я привык программировать и описывать типы, так что почему бы и не `TypeScript`.